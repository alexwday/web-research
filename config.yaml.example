# Deep Research Agent Configuration
# Copy this to config.yaml and customize

# =============================================================================
# LLM PROVIDER SETTINGS
# =============================================================================
llm:
  # Model selection by task type
  models:
    planner: "gpt-5-mini"
    researcher: "gpt-5-mini"
    writer: "gpt-5-mini"
    editor: "gpt-5-mini"
    outline_designer: "gpt-5-mini"
    synthesizer: "gpt-5-mini"
    analyzer: "gpt-5-mini"

  # Token limits
  max_tokens:
    planner: 16000
    researcher: 16000
    writer: 16000
    editor: 16000
    outline_designer: 8000
    synthesizer: 16000
    analyzer: 4000

  # Temperature settings (0.0 = deterministic, 1.0 = creative)
  temperature:
    planner: 0.3
    researcher: 0.2
    writer: 0.4
    editor: 0.2
    outline_designer: 0.3
    synthesizer: 0.3
    analyzer: 0.2

# =============================================================================
# SEARCH & SCRAPING
# =============================================================================
search:
  # Search depth: "basic" or "advanced"
  depth: "advanced"

  # Max results per search
  max_results: 3

  # Search queries per task
  queries_per_task: 1

  # Pre-planning search settings
  pre_plan_queries: 5
  pre_plan_max_results: 5

  # Gap-fill search settings (0 = disabled)
  gap_fill_queries: 0
  gap_fill_max_results: 0

  # Include domains (optional, leave empty for all)
  include_domains: []

  # Minimum Tavily relevance score (0-1, results below this are skipped)
  min_tavily_score: 0.3

  # Exclude domains
  exclude_domains:
    - "pinterest.com"
    - "quora.com"
    - "acronymattic.com"
    - "abbreviations.com"
    - "dokumen.pub"
    - "dokumen.tips"

scraping:
  # Max content length per page (characters)
  max_content_length: 15000

  # Request timeout (seconds)
  timeout: 15

  # User agent rotation
  rotate_user_agents: true

# =============================================================================
# RESEARCH PARAMETERS
# =============================================================================
research:
  # Target number of report sections (hint to outline designer)
  min_initial_tasks: 3

  # Maximum total research tasks across all sections
  max_total_tasks: 10

  # Maximum recursion depth for sub-tasks (0 = no sub-tasks)
  max_recursion_depth: 0

  # Research tasks per section
  tasks_per_section: 2

  # Enable sub-task spawning during research
  enable_recursion: false

  # Pause between task batches (seconds)
  task_delay: 1

  # Maximum runtime (hours) - 0 for unlimited
  max_runtime_hours: 1

  # Maximum research loop iterations (-1 = unlimited, 0 = skip)
  max_loops: 10

# =============================================================================
# GAP ANALYSIS (identifies missing research after initial tasks complete)
# =============================================================================
gap_analysis:
  # Enable/disable the gap analysis phase
  enabled: false

  # Maximum new sections the gap analysis can create
  max_new_sections: 3

  # Maximum total gap-fill tasks across all sections
  max_gap_fill_tasks: 10

# =============================================================================
# SECTION SYNTHESIS (merges research notes into polished section prose)
# =============================================================================
synthesis:
  # Minimum words per synthesized section
  min_words_per_section: 200

  # Maximum words per synthesized section
  max_words_per_section: 600

  # Minimum citations per synthesized section
  min_citations_per_section: 1

  # Maximum concurrent synthesis operations
  max_concurrent: 2

  # Synthesis style: "confident" (no gap talk), "balanced", or "thorough"
  style: "confident"

# =============================================================================
# OUTPUT SETTINGS
# =============================================================================
output:
  # Output directory
  directory: "report"

  # Final report filename (without extension)
  report_name: "DEEP_RESEARCH_REPORT"

  # Export formats: ["markdown", "html", "pdf"]
  formats:
    - "markdown"
    - "html"

  # Include table of contents
  include_toc: true

  # Include bibliography
  include_bibliography: true

  # Include glossary
  include_glossary: true

  # Include executive summary
  include_summary: true

# =============================================================================
# QUALITY CONTROL
# =============================================================================
quality:
  # Minimum source quality score (0-1)
  min_source_quality: 0.55

# =============================================================================
# RATE LIMITING
# =============================================================================
rate_limits:
  # LLM API calls per minute
  llm_calls_per_minute: 20

  # Search API calls per minute
  search_calls_per_minute: 10

  # Web scraping requests per minute
  scrape_requests_per_minute: 30

# =============================================================================
# LOGGING & MONITORING
# =============================================================================
logging:
  # Log level: DEBUG, INFO, WARNING, ERROR
  level: "INFO"

  # Log to file
  file: "logs/research.log"

  # Log rotation (MB)
  max_file_size: 10

  # Keep N backup files
  backup_count: 5

  # Show progress in console
  show_progress: true

# =============================================================================
# DATABASE
# =============================================================================
database:
  # SQLite database file
  path: "data/research_state.db"

  # Enable WAL mode for better concurrency
  wal_mode: true
